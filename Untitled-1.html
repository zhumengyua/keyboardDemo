<!DOCTYPE html>
<html lang="zh-Hans">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./style2.css">
    <title>导航</title>
</head>

<body>

    <header></header>
    <main>
        <div class="wrapper" id="main">

    </main>
    <footer></footer>
</body>
<script>
    //1.创建key数组
    var keys = {
        0: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'],
        1: ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p'],
        2: ['a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l'],
        3: ['z', 'x', 'c', 'v', 'b', 'n', 'm'],
        lenght: 4
    }
    //2.创建对应的hash
    var hash = {
        q: 'qq.com',
        w: 'weibo.com',
        e: 'ele.me',
        r: 'renren.com',
        t: 'tianya.com',
        y: 'yahoo.com',
        u: 'uc.com',
        i: 'iqiyi.com',
        o: 'opera.com',
        p: undefined,
        a: 'acfun.com',
        s: 'sohu.com',
        z: 'zhihu.com',
        m: 'mcdonalds.com'
    }
    //取出桶内（编辑好的）www网址，对应的id
    var hashlocalStorage = JSON.parse(localStorage.getItem('www') || null)
    if (hashlocalStorage) {
        hash = hashlocalStorage
    }
    //主体内的标签和功能创建
    index = 0;
    while (index < keys['lenght']) {
        //3.keys的长度为几，就创建几个div容器。
        divroom = document.createElement('div'); //创建一个div，取名为divroom
        divroom.className = 'row'
        main.appendChild(divroom); //id为room的元素，增加变量divzzz创建的变量
        //4.在div中创建kbd标签。一个div中几个kbd应该由keys里面数组的数决定
        row = keys[index]; //index=1的时候,row=keys[1]=1234567890
        index2 = 0;
        while (index2 < row['length']) {
            kbdroom = document.createElement('kbd');
            divroom.appendChild(kbdroom);
            //每个kbd显示一个字(每个字加一个span)
            span = document.createElement('span')
            span.textContent = row[index2];
            kbdroom.appendChild(span)
            span.className = "text"
            //kbd下面创建一个button标签,用来存放编辑键
            buttonroom = document.createElement('button');
            buttonroom.textContent = '编辑'
            kbdroom.appendChild(buttonroom);
            kbdroom.className = "key2"
            buttonroom.id = row[index2];
            //图标  
            imgioc = document.createElement('img')
            if (hash[row[index2]]) {
                imgioc.src = 'http://' + hash[row[index2]] + '/favicon.ico'
            }
            else {
                imgioc.src = 'http://i.loli.net/2018/03/25/5ab76eb265264.png'
            }
            imgioc.onerror = function (faico) {
                faico.target.src = 'http://i.loli.net/2018/03/25/5ab76eb265264.png'
            }
            kbdroom.appendChild(imgioc)
            //编辑键功能
            buttonroom.onclick = function (onkey) {
                button2 = onkey['target']
                img2 = button2.nextSibling//读取下一个节点
                newkey = button2['id']
                x = prompt('给我一个网址')
                hash[newkey] = x;
                //只要hash变更，就存到www里面（浏览器缓存？）
                localStorage.setItem('www', JSON.stringify(hash))
            }
            index2 = index2 + 1;
        }
        index = index + 1;
    }
    //监听键盘输入
    document.onkeypress = function (onkey) {
        newkey = onkey.key
        //website=对应的网址
        website = hash[newkey]
        window.open('http://' + website, '_black')
    }
</script>

</html>